[tool.uv.workspace]
members = ["packages/*"]

[tool.pytest.ini_options]
testpaths = ["tests"]
filterwarnings = [
  # https://github.com/RDFLib/rdflib/issues/1830
  "ignore:.*_pytestfixturefunction is not defined in namespace:UserWarning"
]
markers = [
  "network: mark tests that make external network requests",
  "slow: mark test as slow to run",
  "no_asserts: tests that don't have meaningful asserts, but are only snapshot comparisons, or historically had print statements, or other non-erroring behavior",
  "strcmp: tests that compare stringified values rather than the values themselves",
  "biolink: tests that validate that the biolink model is unchanged",
  "docker: tests that require a running docker server",
  "plantumlgen: Tests for the plantuml generator",
  "pydanticgen_split: Split module generation in pydanticgen",
  "pydanticgen_npd: tests for the numpydantic array generator",
  "panderagen: tests for the pandera generator",
  "pythongen: Tests for python generator",
  "pydanticgen: Tests for pydantic generator",
  "javagen: Tests for java generator",
  "jsonschemagen: Tests for Json Schema generator",
  "shaclgen: Tests for shacl generator",
  "shexgen: Tests for shex generator",
  "jsonldgen: Test for JSON-LD generator",
  "jsonldcontextgen: Test for JSON-LD context generator",
  "rdfgen: Tests for the RDFGenerator",
  "rustgen: Tests for the RustGenerator",
  "sqlalchemygen: Tests for SQL Alchemy generator",
  "sqlddlgen: Tests for SQL DDL generator",
  "sqlddlpostgresgen: Tests for SQL DDL postgres generator",
  "owlgen: Tests for OWL generator",
  "yamlgen: Tests for the YAML generator",
  "yarrrml: End-to-end tests for the YARRRML generator"
]

# Minimal ruff config at root for workspace-level excludes
# Package-specific rules are in packages/linkml/pyproject.toml
[tool.ruff]
extend-exclude = [
    "examples/",
    "docs/",
    "notebooks/",
    "**/__snapshots__",
    "**/output",
]

[tool.ruff.lint.per-file-ignores]
# Test files can have imports in various places and unused imports for fixtures
"tests/**/__init__.py" = ["F401"]
"tests/**/test_*.py" = ["E402", "E741", "F811", "F401"]
"tests/**/input/*.py" = ["E402", "F811"]
"tests/**/models/*.py" = ["F811"]

# Codespell config at root for workspace-level excludes
[tool.codespell]
skip = [
  ".git", "*.pdf", "*.svg", "*.dill", "*.ttl",
  "pyproject.toml",
  "uv.lock",
  "notebooks",
  "docs",
  "examples",
  "**/__snapshots__",
  "**/output",
  "tests/test_linkml/data",
  "tests/test_linkml_runtime/test_loaders_dumpers/input",
]
# Ignore table where words could be split across rows
ignore-regex = '(\|.*\|.*\|.*\||\[[A-Z][a-z]\][a-z][a-z])'
ignore-words-list = [
  "acsess",
  "AGS",
  "amination",
  "anc",
  "brite",
  "ClassE",  # test class name
  "CrossReference",
  "crossReference",
  "connexion",
  "disjointness",  # valid term in logic/set theory
  "EHR",
  "infarction",
  "linke",
  "mater",
  "MILIARY",  # medical term (miliary tuberculosis)
  "Miliary",  # medical term
  "mor",
  "ND",  # abbreviation in test data
  "ot",  # variable name in test code
  "ser",
  "Stye",
  "TE",
  "thirdparty",
  "transferrin",  # medical term, not "transferring"
  "Vas",
  "vrsatile",  # test data filename
  "GENERARE",
  "re-used",
  "doesnt",
  "crate",
  "alse",  # appears in snapshots
]
quiet-level = 3
