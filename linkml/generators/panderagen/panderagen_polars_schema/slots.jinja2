{#-
  Jinja2 macros for rendering slots in a Pandera class-based model

-#}
{%- import 'enums.jinja2' as enum_macros -%}

{%- macro id_slot_name_class_variable(cls) %}
    _id_name : str = {% if cls.identifier_key_slot() %} '{{ cls.identifier_key_slot() }}' {% else %}None{% endif %}
{%- endmacro -%}

{%- macro render_slot(field) %}
    "{{ field.name }}":{{ ' ' }}
        {%- if (field.required() is none or field.required() is false) and (field.identifier() is not true) -%}
            Optional[
        {%- endif -%}
       {{field.range}}
        {%- if (field.required() is none or field.required() is false) and (field.identifier() is not true) -%}
            {{ ']' }}
        {%- endif -%},
{%- endmacro %}

{%- macro render_list_slot(field) %}
    {{ field.name }}:{{ ' ' }}
        {%- if (field.required() is none or field.required() is false) and (field.identifier() is not true) -%}
            Optional[
        {%- endif %}
        pl.List({{ field.range }})
        {%- if (field.required() is none or field.required() is false) and (field.identifier() is not true) -%}
            {{ ']' }}
        {%- endif %}
{%- endmacro %}
