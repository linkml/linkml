{%- if element.title %}
    {%- set title = element.title ~ ' (' ~ element.name ~ ')' -%}
{%- else %}
    {%- if gen.use_slot_uris -%}
        {%- set title = element.name -%}
    {%- else -%}
        {%- set title = gen.name(element) -%}
    {%- endif -%}
{%- endif -%}

{% macro compute_range(slot) -%}
    {%- if slot.any_of or slot.exactly_one_of -%}
        {%- for subslot_range in schemaview.slot_range_as_union(slot) -%}
            {{ gen.link(subslot_range) }}
            {%- if not loop.last -%}
                &nbsp;or&nbsp;<br />
            {%- endif -%}
        {%- endfor -%}
    {%- else -%}
        {{ gen.link(slot.range) }}
    {%- endif -%}
{% endmacro %}

# Slot: {{ title }} {% if element.deprecated %} <span style="color: red;"><strong> (DEPRECATED) </strong></span> {% endif %}

{%- if header -%}
{{ header }}
{%- endif -%}

{% if element.description %}
{% set element_description_lines = element.description.split('\n') %}
{% for element_description_line in element_description_lines %}
_{{ element_description_line }}_
{% endfor %}
{% endif %}

{% if element.abstract %}
* __NOTE__: this is an abstract slot and should not be populated directly
{% endif %}

URI: {{ gen.uri_link(element) }}

{%- if element.alias %}
Alias: {{ element.alias }}
{% endif -%}

{% if schemaview.slot_parents(element.name) or schemaview.slot_children(element.name, mixins=False) %}

## Inheritance

{{ gen.inheritance_tree(element, mixins=True) }}
{% else %}
<!-- no inheritance hierarchy -->
{% endif %}

{% set classes_by_slot = schemaview.get_classes_by_slot(element, include_induced=True) %}
{% if classes_by_slot %}

## Applicable Classes

| Name | Description | Modifies Slot |
| --- | --- | --- |
{% for c in classes_by_slot -%}
| {{ gen.link(c) }} | {{ schemaview.get_class(c).description|enshorten }} | {% if c in schemaview.get_classes_modifying_slot(element) %} yes {% else %} no {% endif %} |
{% endfor %}

{% endif %}

{% if schemaview.is_mixin(element.name) %}
## Mixin Usage

| mixed into | description | range | domain |
| --- | --- | --- | --- |
{% for s in schemaview.slot_children(element.name, is_a=False) -%}
| {{ gen.link(s) }} | {{ schemaview.get_slot(s).description|enshorten }} | {{ schemaview.get_slot(s).range }} | {{ schemaview.get_classes_by_slot(schemaview.get_slot(s))|join(', ') }} |
{% endfor %}
{% endif %}

## Properties

### Type and Range

| Property | Value |
| --- | --- |
| Range | {{ compute_range(element) }} |
{%- if element.domain %}
| Domain | {{ gen.link(element.domain) }} |
{%- endif %}
{%- if element.domain_of %}
| Domain Of | {{ gen.links(element.domain_of) | join(', ') }} |
{%- endif %}
{%- if element.slot_uri %}
| Slot URI | {{ gen.uri_link(element.slot_uri) }} |
{%- endif %}
{%- if element.slot_group %}
| Slot Group | {{ gen.link(element.slot_group) }} |
{%- endif %}
{%- if element.is_grouping_slot %}
| Is Grouping Slot | Yes |
{%- endif %}

### Cardinality and Requirements

| Property | Value |
| --- | --- |
{%- if element.required %}
| Required | Yes |
{%- elif element.recommended %}
| Recommended | Yes |
{%- endif %}
{%- if element.multivalued %}
| Multivalued | Yes |
{%- endif %}
{%- if element.minimum_cardinality is not none %}
| Minimum Cardinality | {{ element.minimum_cardinality }} |
{%- endif %}
{%- if element.maximum_cardinality is not none %}
| Maximum Cardinality | {{ element.maximum_cardinality }} |
{%- endif %}
{%- if element.exact_cardinality is not none %}
| Exact Cardinality | {{ element.exact_cardinality }} |
{%- endif %}

{%- if element.multivalued and (element.list_elements_unique is not none or element.list_elements_ordered is not none) %}
### List/Collection Properties

| Property | Value |
| --- | --- |
{%- if element.list_elements_unique is not none %}
| Elements Must Be Unique | {% if element.list_elements_unique %}Yes{% else %}No{% endif %} |
{%- endif %}
{%- if element.list_elements_ordered is not none %}
| Elements Are Ordered | {% if element.list_elements_ordered %}Yes{% else %}No{% endif %} |
{%- endif %}

{% endif %}
{%- set has_slot_chars = element.key or element.identifier or element.designates_type
    or element.inherited or element.readonly or element.ifabsent or element.owner
    or element.shared or element.is_class_field or element.is_usage_slot
    or element.usage_slot_name or element.singular_name or schemaview.is_mixin(element.name) %}

{%- if has_slot_chars %}
### Slot Characteristics

| Property | Value |
| --- | --- |
{%- if element.singular_name %}
| Singular Name | {{ element.singular_name }} |
{%- endif %}
{%- if element.key %}
| Key | Yes |
{%- endif %}
{%- if element.identifier %}
| Identifier | Yes |
{%- endif %}
{%- if element.designates_type %}
| Designates Type | Yes |
{%- endif %}
{%- if element.inherited %}
| Inherited | Yes |
{%- endif %}
{%- if element.readonly %}
| Readonly | Yes |
{%- endif %}
{%- if element.ifabsent %}
| If Absent | `{{ element.ifabsent }}` |
{%- endif %}
{%- if element.owner %}
| Owner | {{ gen.link(element.owner) }} |
{%- endif %}
{%- if element.shared %}
| Shared | Yes |
{%- endif %}
{%- if element.is_class_field %}
| Is Class Field | Yes |
{%- endif %}
{%- if element.is_usage_slot %}
| Is Usage Slot | Yes |
{%- endif %}
{%- if element.usage_slot_name %}
| Usage Slot Name | {{ element.usage_slot_name }} |
{%- endif %}
{%- if schemaview.is_mixin(element.name) %}
| Mixin | Yes |
{%- endif %}

{% endif %}
{%- set has_value_constraints = element.minimum_value is not none or element.maximum_value is not none or element.pattern %}

{%- if has_value_constraints %}
### Value Constraints

| Property | Value |
| --- | --- |
{%- if element.minimum_value is not none %}
| Minimum Value | {{ element.minimum_value|int }} |
{%- endif %}
{%- if element.maximum_value is not none %}
| Maximum Value | {{ element.maximum_value|int }} |
{%- endif %}
{%- if element.pattern %}
| Regex Pattern | `{{ element.pattern }}` |
{%- endif %}

{% endif %}

{%- set has_expressions = element.any_of or element.all_of or element.exactly_one_of
    or element.none_of or element.equals_expression or element.has_member or element.all_members %}

{%- if has_expressions %}
<details>
<summary>Expressions & Logic</summary>

{%- if element.any_of %}
#### Any Of

Value must satisfy at least one of:

{%- for expr in element.any_of %}
- {{ expr }}
{%- endfor %}
{%- endif %}

{%- if element.all_of %}
#### All Of

Value must satisfy all of:

{%- for expr in element.all_of %}
- {{ expr }}
{%- endfor %}
{%- endif %}

{%- if element.exactly_one_of %}
#### Exactly One Of

Value must satisfy exactly one of:

{%- for expr in element.exactly_one_of %}
- {{ expr }}
{%- endfor %}
{%- endif %}

{%- if element.none_of %}
#### None Of

Value must not satisfy any of:

{%- for expr in element.none_of %}
- {{ expr }}
{%- endfor %}
{%- endif %}

{%- if element.equals_expression %}
#### Equals Expression

`{{ element.equals_expression }}`
{%- endif %}

{%- if element.has_member %}
#### Has Member

{{ element.has_member }}
{%- endif %}

{%- if element.all_members %}
#### All Members

{{ element.all_members }}
{%- endif %}

</details>
{% endif %}

{% if schemaview.usage_index().get(element.name) %}
## Usages

| used by | used in | type | used |
| ---  | --- | --- | --- |
{% for usage in schemaview.usage_index().get(element.name) -%}
| {{ gen.link(usage.used_by) }} | {{ gen.link(usage.slot) }} | {{ usage.metaslot }} | {{ gen.link(usage.used) }} |
{% endfor %}
{% endif %}

{% include "common_metadata.md.jinja2" %}

## LinkML Source

<details>
```yaml
{{ gen.yaml(element) }}
```
</details>

{%- if footer -%}
{{ footer }}
{%- endif -%}
